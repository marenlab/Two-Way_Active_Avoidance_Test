# Two-Way Active Avoidance Test

This toolbox streamlines the **visualization and organization of experimental data** from the **Colbourn active avoidance chamber** by aligning outputs with the distinct event types recorded throughout behavioral sessions.

---

## 📁 Main Script

**Script:** `Avoidance_Analyse.m`  
**Main Purpose:**  
- Analyze one or more `.csv` files.
- Calls the function: `Avoidance_conditioning.m`

**Required Files:**  
- `.csv` files generated by the Colbourn active avoidance chamber.

---

## ⚙️ Function: `Avoidance_conditioning`

### **Input**
- `input_settings` – Experimental settings (e.g., thresholds, parameters).  
- `raw_data` – Input dataset from a `.csv` file. Expected columns:

  1. Arbitrary timestamps (not aligned to experiment timeline)  
  2. Time in `MM:SS:FFF` format (minutes/seconds/milliseconds)  
  3. Event labels: `"Entry"` / `"Exit"`  
  4. Numerical labels corresponding to column 5  
  5. Descriptive event labels:
     - `"Acclimatation"`: Baseline period  
     - `"Right/Left Entrance"`: Animal enters the shuttle  
     - `"Right/Left Exit"`: Animal exits the shuttle  
     - `"Pav CS"`: Start of Pavlovian conditioning, followed by an `"US"`  
     - `"CS"`: Conditioned stimulus  
     - `"ITI"`: Inter-trial interval  
     - `"CS Remainder"`: Reinforced CS after `"CS"`  
     - `"after CS"`: Events post-CS Remainder (renamed to `"Silence gap after CS remainder"`)

### **Output**
- `Summary` – All shuttle events recorded in the session.  
- `Intervals` – Time intervals for CS, CS remainder, after-CS, ITI, and US.  
- `Output_Events` – A `{1x3}` cell array:

  | Column | Phase                    |
  |--------|--------------------------|
  | 1      | Acclimation              |
  | 2      | Pavlovian CS             |
  | 3      | CS, US, and ITI (Avoidance phase) |

Each `Output_Events{X}` contains:
- Column 1: Time in session  
- Column 2: Shuttle direction  
- Column 3: Phase (e.g., CS, ITI)  
- Column 4: Description of the phase  
- Column 5: Time delta from the last event  
- Column 6: Description of the preceding event  

---

## 📊 Script: `Avoidance_stats`

### **Input**
- `Summary` output: contains all shuttles per animal during the conditioning phase.

### **Output**
- `Stats.summary`: A `{1x3}` cell array:

  | Column | Phase                    |
  |--------|--------------------------|
  | 1      | Acclimation              |
  | 2      | Pavlovian CS             |
  | 3      | CS, US, and ITI          |

Each **cell column** corresponds to one animal.  
The animal order is based on the upload folder structure and can be verified via: `header.Filename_csv`.

An additional `.csv` file is generated, where each experimental phase is separated by blank lines.

---

## 📈 Script: `Avoidance_plots`

- Generates basic visualizations based on the structured output.

---

## 👥 Authors

**Flavio Mourao**  
**Samantha Plas**

**Contact:**  
📧 mourao.fg@illinois.edu  
🧠 Maren Lab – Beckman Institute for Advanced Science and Technology  
🏫 University of Illinois Urbana-Champaign

---

**Started:** April 2025  
**Last updated:** April 2025
